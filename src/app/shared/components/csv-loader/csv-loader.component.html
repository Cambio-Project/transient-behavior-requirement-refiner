<h2>Select File</h2>

<div class="row">
	<div class="col-12">

		<!-- Upload selection -->
		<mat-form-field appearance="fill" style="margin-right: 16px;">
			<mat-label>File Source</mat-label>
			<mat-select [(ngModel)]="sourceType" value="upload">
				<mat-option value="demo">Demo</mat-option>
				<mat-option value="upload">Upload</mat-option>
				<mat-option value="prometheus">Prometheus</mat-option>
			</mat-select>
		</mat-form-field>

		<!-- Selection: Demo file -->
		<mat-form-field *ngIf="sourceType === 'demo'" appearance="fill">
			<mat-label>Demo File</mat-label>
			<mat-select (selectionChange)="onDemoFileChange($event)">
				<mat-option *ngFor="let file of assetCsvFiles" [value]="file">
					{{ file }}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<!-- Selection: Custom file upload -->
		<input *ngIf="sourceType === 'upload'" type="file" accept=".csv" (change)="onFileSelected($event)"/>

		<!-- Selection: Prometheus database connection -->
		<ng-container *ngIf="sourceType === 'prometheus'">
			<mat-form-field appearance="fill">
				<mat-label>Prometheus Connection URL</mat-label>
				<input [(ngModel)]="dbUrl" matInput type="text" (keyup.enter)="onConnectButtonPressed()"/>
			</mat-form-field>

			<button mat-raised-button color="primary" (click)="onConnectButtonPressed()" style="margin-left: 8px;">
				Connect
			</button>
		</ng-container>

		<!-- Selection: Prometheus database connection -->
		<ng-container *ngIf="sourceType === 'prometheus' && dbConnected">
			<mat-form-field appearance="fill" style="margin-left: 16px;">
				<mat-label>Starting Time</mat-label>
				<input [(ngModel)]="dbStartTimestamp" matInput type="text"/>
			</mat-form-field>

			<mat-form-field appearance="fill">
				<mat-label>Ending Time</mat-label>
				<input [(ngModel)]="dbEndTimestamp" matInput type="text"/>
			</mat-form-field>

			<button mat-raised-button color="primary" style="margin-left: 8px;">
				Set Interval
			</button>
		</ng-container>

	</div>
</div>

<mat-card style="padding: 0;">
	<div class="table-container" *ngIf="dataset">
		<table mat-table [dataSource]="dataset.data" class="mat-elevation-z8" style="width: 100%;">
			<ng-container [matColumnDef]="column" *ngFor="let column of metricDefinitions; let i = index">
				<th mat-header-cell *matHeaderCellDef> {{ column }} </th>
				<td mat-cell *matCellDef="let val"> {{ val[column] }} </td>
			</ng-container>
			<tr mat-header-row *matHeaderRowDef="metricDefinitions"></tr>
			<tr mat-row *matRowDef="let row; columns: metricDefinitions;"></tr>
		</table>
	</div>
</mat-card>


<!-- <div class="table-container" *ngIf="dataset">
	<table mat-table [dataSource]="dataset.data" class="mat-elevation-z8" style="width: 100%;">
		<ng-container [matColumnDef]="column" *ngFor="let column of metricDefinitions; let i = index">
			<th mat-header-cell *matHeaderCellDef> {{ column }} </th>
			<td mat-cell *matCellDef="let val"> {{ val[column] }} </td>
		</ng-container>
		<tr mat-header-row *matHeaderRowDef="metricDefinitions"></tr>
		<tr mat-row *matRowDef="let row; columns: metricDefinitions;"></tr>
	</table>
</div> -->
